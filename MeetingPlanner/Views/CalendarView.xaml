<UserControl x:Class="MeetingPlanner.Views.CalendarView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="Background" Value="#6a7eee"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10 5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="0 0 0 10"/>
            <Setter Property="Padding" Value="5"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <!-- Calendar -->
        <Calendar Grid.Column="0" Margin="10"
                 SelectedDate="{Binding SelectedDate, Mode=TwoWay}"
                 DisplayDate="{Binding SelectedDate}"
                 SelectionMode="SingleDate"
                 SelectedDatesChanged="Calendar_SelectedDatesChanged"/>

        <!-- Event Form -->
        <Border Grid.Column="1" Background="#F0F5FF" Padding="15"
               Visibility="{Binding IsEventFormVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="New Event" FontSize="16" FontWeight="Bold" Margin="0 0 0 10"/>

                    <Label Content="Title*"/>
                    <TextBox Text="{Binding NewEvent.Title, UpdateSourceTrigger=PropertyChanged}"/>

                    <Label Content="Description"/>
                    <TextBox Text="{Binding NewEvent.Description}" AcceptsReturn="True" MinHeight="60"/>

                    <Label Content="Location"/>
                    <TextBox Text="{Binding NewEvent.Location}"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0 0 5 0">
                            <Label Content="Start Time"/>
                            <DatePicker SelectedDate="{Binding NewEvent.StartTime}"/>
                            <ComboBox SelectedItem="{Binding NewEvent.StartTime.TimeOfDay}">
                                <!-- Time slots -->
                                <sys:TimeSpan>08:00:00</sys:TimeSpan>
                                <sys:TimeSpan>09:00:00</sys:TimeSpan>
                                <sys:TimeSpan>10:00:00</sys:TimeSpan>
                                <!-- Add more time slots as needed -->
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="5 0 0 0">
                            <Label Content="End Time"/>
                            <DatePicker SelectedDate="{Binding NewEvent.EndTime}"/>
                            <ComboBox SelectedItem="{Binding NewEvent.EndTime.TimeOfDay}">
                                <sys:TimeSpan>09:00:00</sys:TimeSpan>
                                <sys:TimeSpan>10:00:00</sys:TimeSpan>
                                <sys:TimeSpan>11:00:00</sys:TimeSpan>
                            </ComboBox>
                        </StackPanel>
                    </Grid>

                    <Label Content="Invite Friends"/>
                    <ComboBox ItemsSource="{Binding Friends}" DisplayMemberPath="FullName"
                             SelectedItem="{Binding SelectedFriend}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding FullName}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>

                    <Button Content="Add" Command="{Binding AddAttendeeCommand}"
                           CommandParameter="{Binding SelectedFriend}"
                           Style="{StaticResource PrimaryButton}"/>

                    <ListView ItemsSource="{Binding SelectedAttendees}" Height="100" Margin="0 10">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding FullName}" VerticalAlignment="Center"/>
                                    <Button Content="Remove" Margin="10 0 0 0"
                                           Command="{Binding DataContext.RemoveAttendeeCommand, 
                                                   RelativeSource={RelativeSource AncestorType=UserControl}}"
                                           CommandParameter="{Binding}"
                                           Style="{StaticResource PrimaryButton}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <Button Content="Create Event" Command="{Binding CreateEventCommand}"
                           Style="{StaticResource PrimaryButton}" Margin="0 10"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>